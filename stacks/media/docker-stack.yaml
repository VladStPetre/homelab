---
services:
  jellyfin:
    container_name: jellyfin
    image: jellyfin/jellyfin:2025081805
    user: root
    environment:
      - PUID=${UID}
      - PGID=${GID}
      - TZ=Europe/Bucharest
    ports:
      - "8096:8096"
    volumes:
      - jellyfin-date:/config
      - /mnt/media:/media
    labels:
      - "portainer.io/managed=true"
      - "io.portainer.accesscontrol.users=admin"
      - "traefik.enable=true"
      - "traefik.http.routers.jellyfin.rule=Host(`jellyfin.${DOMAIN_NAME}`)"
      - "traefik.http.routers.jellyfin.entrypoints=web"
      - "traefik.http.routers.jellyfin.tls=false"
      - "traefik.http.services.jellyfin.loadbalancer.server.port=8096"
    restart: always
    deploy:
      update_config:
        order: start-first
    networks:
      - hlcl

  qbittorrent:
    container_name: qbittorrent
    image: linuxserver/qbittorrent:5.1.2
    ports:
      - "8081:8081"              # web UI
      - "6881:6881"              # torrent traffic TCP
      - "6881:6881/udp"          # torrent traffic UDP
    environment:
      - PUID=${UID}                # your local user ID
      - PGID=${GID}                # your local group ID
      - TZ=Europe/Bucharest
      - WEBUI_PORT=8081
      - UMASK_SET=000            # sensible file perms
    volumes:
      - qbittorrent-data:/config
      - /mnt/media/Movies:/movies
      - /mnt/media/Series:/series
      - /mnt/media/Watch:/watch
    labels:
      - "portainer.io/managed=true"
      - "io.portainer.accesscontrol.users=admin"
      - "traefik.enable=true"
      - "traefik.http.routers.qbittorrent.rule=Host(`qb.${DOMAIN_NAME}`)"
      - "traefik.http.routers.qbittorrent.entrypoints=web"
      - "traefik.http.routers.qbittorrent.tls=false"
      - "traefik.http.services.qbittorrent-utils.loadbalancer.server.port=8081"
    restart: always
    deploy:
      update_config:
        order: start-first
    networks:
      - hlcl

volumes:
  jellyfin-data: {}
  qbittorrent-data: {}

networks:
  hlcl:
    name: hlcl
    external: true